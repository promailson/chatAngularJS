<!DOCTYPE html>
<html lang="pt-br" ng-app="chatApp">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat 2</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="main.css">
</head>

<body>
    <p ng-repeat="i in [1, 2, 3, 4,5,6,7,8,9,10,11]">Lorem Ipsum is simply dummy text of the printing and
        typesetting industry. Lorem Ipsum has been the industry's standard dummy text
        ever since the 1500s, when an unknown printer took a galley of type and
        scrambled it to make a type specimen book. It has survived not only five
        centuries, but also the leap into electronic typesetting, remaining essentially
        unchanged. It was popularised in the 1960s with the release of Letraset sheets
        containing Lorem Ipsum passages, and more recently with desktop publishing
        software like Aldus PageMaker including versions of Lorem Ipsum.</p>
    <!-- <div ng-controller="ChatListController">
        <ul>
            <li ng-repeat="chat in chats">
                <span>{{chat.name}}</span>
                <p>{{chat.status}}</p>
            </li>
        </ul>
    </div> -->
    <div class="tela">
        <div class="chatsItens" ng-controller="ChatListController">
            <div class="chatItem" ng-repeat="chat in chats">
                <div class="card">
                    <header class="card-header header-title" ng-model="collapsed" ng-click="collapsed=!collapsed">
                        <div class="card-header-title">
                            <i class="fa fa-circle is-online"></i>
                            <img src="{{chat.photo}}">
                            <p>{{chat.name}}</p>
                        </div>
                        <div class="card-header-icon">
                            <span class="icon">
                                <i class="fas fa-minus"></i>
                            </span>
                            <span class="icon close" ng-click="remove(chat)">
                                <i class="fas fa-times"></i>
                            </span>
                            </a>
                    </header>
                    <div class="chatbox-area" ng-show="!collapsed">
                        <div class="card-content chat-content" scroll-glue="glued">
                            <div class="content">
                                <div class="chat-message-group">
                                    <div class="chat-thumb">
                                        <img src="{{chat.photo}}">
                                    </div>
                                    <div class="chat-messages">
                                        <div class="message">Olá meu nome é Mailson</div>
                                        <div class="from">Hoje 04:55</div>
                                    </div>
                                </div>
                                <div class="chat-message-group writer-user">
                                    <div class="chat-messages">
                                        <div class="message">Olá meu nome é Mailson</div>
                                        <div class="from">Hoje 04:55</div>
                                    </div>
                                </div>
                                <div class="chat-message-group {{m.from == 0 ? '' : 'writer-user'}}"
                                    ng-repeat="m in chat.messages">
                                    <div class="chat-thumb" ng-if="m.from == 0">
                                        <img src="{{chat.photo}}">
                                    </div>
                                    <div class="chat-messages">
                                        <div class="message">
                                            {{m.message}}
                                        </div>
                                        <div class="from">{{m.time}}</div>
                                        <!-- <div class="message">Olá meu nome é Mailson</div>
                                        <div class="message">Lorem Ipsum is simply dummy text of the printing and
                                            typesetting industry. Lorem Ipsum has been the industry's standard dummy
                                            text
                                            ever since the 1500s, when an unknown printer took a galley of type and
                                            scrambled it to make a type specimen book. It has survived not only five
                                            centuries, but also the leap into electronic typesetting, remaining
                                            essentially
                                            unchanged. It was popularised in the 1960s with the release of Letraset
                                            sheets
                                            containing Lorem Ipsum passages, and more recently with desktop publishing
                                            software like Aldus PageMaker including versions of Lorem Ipsum.</div> -->
                                    </div>
                                </div>
                                <div class="chat-message-group escrevendo" ng-if="focus">
                                    <div class="typing">Escrevendo</div>
                                    <div class="spinner">
                                        <div class="bounce1"></div>
                                        <div class="bounce2"></div>
                                        <div class="bounce3"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <footer class="card-footer">
                            <div class="form">
                                <textarea class="chat-textarea autoExpand" auto-resize ng-model="mensagem"
                                    placeholder="Digite aqui" rows='1'></textarea>
                            </div>
                            <div class="enviar">
                                <a href="#"><i class="fas fa-paper-plane"></i></a>
                            </div>
                        </footer>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.0/angular.min.js"></script>
    <script src="https://cdn.rawgit.com/Luegg/angularjs-scroll-glue/master/src/scrollglue.js"></script>
    <script src="app.js"></script>
    <script>

        // window.onload = function () {
        //     $(".card-header").click(function () {
        //         $(this).parent().children(".chatbox-area").toggle();
        //         //console.log($(this).parent().children(".chatbox-area"));
        //     });
        //     $(".close").click(function () {
        //         $(this).parent().parent().parent().empty();
        //     });
        //     $(".escrevendo").hide();
        //     $(".card-content").scrollTop($(".card-content").prop("scrollHeight"));
        //     $(".chat-textarea").focus(function () {
        //         $(".escrevendo").show();
        //         $(".card-content").scrollTop($(".card-content").prop("scrollHeight"));
        //     });
        //     $(".chat-textarea").focusout(function () {
        //         $(".escrevendo").hide();
        //         $(".card-content").scrollTop($(".card-content").prop("scrollHeight"));
        //     });
        // }
        // $(document)
        //     .one('focus.autoExpand', 'textarea.autoExpand', function () {
        //         var savedValue = this.value;
        //         this.value = '';
        //         this.baseScrollHeight = this.scrollHeight;
        //         this.value = savedValue;
        //     })
        //     .on('input.autoExpand', 'textarea.autoExpand', function () {
        //         var minRows = this.getAttribute('data-min-rows') | 0, rows;
        //         this.rows = minRows;
        //         rows = Math.ceil((this.scrollHeight - this.baseScrollHeight) / 16);
        //         this.rows = minRows + rows;
        //     });
    </script>
</body>

</html>